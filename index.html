<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>DRSong.AI - Instant AI Song Generator</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
  <style>
    .btn-animate {
      transition: transform 0.2s ease;
    }
    .btn-animate:active {
      transform: scale(0.95);
    }
  </style>
</head>
<body class="bg-gradient-to-br from-black to-gray-900 text-white min-h-screen flex flex-col items-center justify-center p-4">

  <h1 class="text-4xl font-bold mb-6 text-center">ğŸ¶ DRSONG.AI</h1>
  <p class="mb-8 text-center text-gray-300">Enter your lyrics & let AI make a song in 1 click</p>

  <div class="w-full max-w-md space-y-4 bg-white/5 p-6 rounded-xl backdrop-blur-md shadow-xl border border-white/10">

    <textarea id="lyrics" rows="5" placeholder="ğŸ¤ Enter your lyrics here..." class="w-full p-3 rounded-md bg-black/40 border border-white/20 placeholder-gray-400 text-white"></textarea>

    <select id="voice" class="w-full p-3 rounded-md bg-black/40 border border-white/20 text-white">
      <option value="female">ğŸ§ Female Voice</option>
      <option value="male">ğŸ™ï¸ Male Voice</option>
      <option value="rap">ğŸ¤ Rap Voice</option>
    </select>

    <select id="style" class="w-full p-3 rounded-md bg-black/40 border border-white/20 text-white">
      <option value="filmy">ğŸ¬ Filmy</option>
      <option value="dj">ğŸ›ï¸ DJ</option>
      <option value="sad">ğŸ˜¢ Sad</option>
      <option value="lofi">ğŸŒ™ Lo-fi</option>
    </select>

    <button onclick="generateSong()" class="btn-animate w-full py-3 rounded-md bg-indigo-600 hover:bg-indigo-700 transition text-white font-semibold text-lg shadow-md">
      ğŸš€ Generate Song
    </button>

    <div id="loading" class="hidden text-center mt-4">
      <lottie-player src="https://assets4.lottiefiles.com/packages/lf20_kxsd2ytq.json" background="transparent" speed="1" style="width: 80px; height: 80px;" loop autoplay></lottie-player>
      <p class="text-sm text-gray-400">Generating your song...</p>
    </div>

    <div id="result" class="hidden text-center mt-6">
      <p class="mb-2">âœ… Your AI Song is ready!</p>
      <audio id="audioPlayer" controls class="w-full rounded-lg shadow"></audio>
    </div>
  </div>

  <footer class="mt-10 text-xs text-gray-500 text-center">Made with â¤ï¸ by Deepak | DRSONG.AI</footer>

  <script>
    async function generateSong() {
      const lyrics = document.getElementById('lyrics').value;
      const voice = document.getElementById('voice').value;
      const style = document.getElementById('style').value;
      const loading = document.getElementById('loading');
      const result = document.getElementById('result');
      const audioPlayer = document.getElementById('audioPlayer');

      if (!lyrics.trim()) {
        alert("Please enter lyrics.");
        return;
      }

      loading.classList.remove("hidden");
      result.classList.add("hidden");

      try {
        const res = await fetch("http://localhost:5000/generate-song", {
          method: "POST",
          headers: {
            "Content-Type": "application/json"
          },
          body: JSON.stringify({ lyrics, voice, style })
        });

        const data = await res.json();
        if (data.status === "success") {
          audioPlayer.src = data.audio_url;
          audioPlayer.play();
          loading.classList.add("hidden");
          result.classList.remove("hidden");
        }
      } catch (err) {
        console.error("Error:", err);
        alert("Something went wrong.");
        loading.classList.add("hidden");
      }
    }
  </script>
</body>
</html>